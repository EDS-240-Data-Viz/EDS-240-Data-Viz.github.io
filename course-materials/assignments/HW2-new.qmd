---
title: "Assignment #2 (HW #2)"
subtitle: "Assigned Tue 01/21/2025 | Due Tue 02/04/2025"
---

::: {.callout-important}
## You must earn a "Satisfactory" mark for each individual Part (I and II) to earn a "Satisfactory" mark for Assignment #1.

**Read each part of the assignment carefully**, and use the check boxes to ensure you've addressed all elements of the assignment!
:::

# [Part I: Choosing the right graphic form]{.pink-text}

## Learning Outcomes 

- identify which types of visualizations are most appropriate for your data and your audience
- prepare (e.g. clean, explore, wrangle) data so that it's appropriately formatted for building data visualizations
- build effective, responsible, accessible, and aesthetically-pleasing, visualizations using the R programming language, and specifically `{ggplot2}` + ggplot2 extension packages

## Description 

In class, we've been discussing strategies and considerations for choosing the right graphic form to represent your data and convey your intended message. Here, you'll apply what we're learning to natural hazards and demographics data, courtesy of the [FEMA National Risk Index](https://hazards.fema.gov/nri/){target="_blank"} (NRI) and the [US Census Bureau's American Community Survey](https://www.census.gov/programs-surveys/acs/about.html){target="_blank"} (ACS).

### Part 1a. Background reading

Unfold the following note to read more about the data before continuing on (collapsed to save space):

::: {.callout-note collapse=true}
## About the data

#### About FEMA's National Risk Index (NRI) for Natural Hazards

[FEMA](https://www.fema.gov/about/strategic-plan/about-fema){target="_blank"} (Federal Emergency Management Agency) is a government agency with a mission of helping people before, during, and after disasters. In 2021, FEMA launched the National Risk Index (NRI), "a [dataset](https://hazards.fema.gov/nri/data-resources){target="_blank"} and [online tool](https://hazards.fema.gov/nri/map){target="_blank"} to help illustrate the United States communities most at risk for [18 natural hazards](https://hazards.fema.gov/nri/natural-hazards){target="_blank"}".

**Risk** is defined as the potential for negative impacts resulting from natural hazards. It's calculated using the following equation (and illustrated in [this graphic](https://hazards.fema.gov/nri/Content/Images/StaticPageImages/Risk_Index_Calculation.svg){target="_blank"}; read more about [determining risk](https://hazards.fema.gov/nri/determining-risk){target="_blank"}):

$$Risk\:Index = Expected\:Annual\:Loss \times \frac{Social\:Vulnerability}{Community\:Resilience}$$

NRI provides hazard type-specific scores, as well as a composite score, which adds together the risk from all 18 hazard types. A community's **risk score** is represented by its percentile ranking among all other communities at the same level for Risk, Expected Annual Loss, Social Vulnerability and Community Resilience -- for example, if a given county's Risk Index percentile for a hazard type is 84.32 then its Risk Index value is greater than 84.32% of all US counties. Each community is also assigned a **risk rating**, which is a qualitative rating that describes the community in comparison to all other communities at the same level, ranging from “Very Low” to “Very High.”

You can learn more about the NRI at [hazards.fema.gov/nri](https://hazards.fema.gov/nri/learn-more){target="_blank"}.

```{r}
#| eval: true
#| echo: false
#| out-width: "80%"
#| fig-align: "center"
knitr::include_graphics("images/NRI.png")
```

::: {.center-text .gray-text .body-text-s}
*Screenshot of the [The National Risk Index's interactive mapping and data-based interface](https://hazards.fema.gov/nri/map)*
:::

#### Accessing NRI Data

Data at the county- and census tract-level are available for download in multiple formats (including Shapefiles & CSVs) from NRI's [Data Resources page](https://hazards.fema.gov/nri/data-resources){target="_blank"}.

### About the US Census Bureau's American Community Survey (ACS)

The **[American Community Survey (ACS)](https://www.census.gov/programs-surveys/acs/about.html){target="_blank"}** is a nationwide, continuous survey designed to provide communities with reliable and timely social, economic, housing, and demographic data every year. Unlike the **Decennial Census** (which counts every person in the US every 10 years for the purpose of congressional appointment), the ACS collects detailed information from a small subset of the population (~3.5 million households) at 1- and 5-year intervals. Learn more about the [differences between these 1- and 5-year estimates](https://www.census.gov/programs-surveys/acs/guidance/estimates.html){target="_blank"}.

#### Accessing ACS Data

The US Census Bureau provides a couple of tools for accessing their data, including: 

1. **[data.census.gov](https://data.census.gov){target="_blank"}:** a browser-based portal for exploring the many available [data tables](https://data.census.gov/table){target="_blank"} (e.g. [Table B02001](https://data.census.gov/table?q=B02001){target="_blank"}: Race)
2. **[The Census Data API](https://www.census.gov/data/developers/data-sets.html){target="_blank"}:** a data service that enables software developers to access and use Census Bureau data within their applications

When working in R, the [`{tidycensus}`](https://walker-data.com/tidycensus/) package is arguably the easiest way to query and retrieve Census data -- use the [`get_acs()` function](https://walker-data.com/tidycensus/articles/basic-usage.html#working-with-acs-data){target="_blank"} to obtain ACS data for specified geographies (e.g. counties or census tracts), tables (e.g. B02001), variables (e.g. B02001_002, B02001_003), years (e.g. 2023), states (e.g. CA), surveys (e.g. acs1, acs5), etc.
:::

### Part 1b. Create viz #1 + answer questions

Create a data viz that helps to answer the question: [***How do FEMA National Risk Index scores for counties in California compare to those in other states?***]{.teal-text}

Follow these steps to get started:

1. **Download and unzip the data:** You'll use the [All Counties - County-level detail (Table)](https://hazards.fema.gov/nri/Content/StaticDocuments/DataDownload//NRI_Table_Counties/NRI_Table_Counties.zip) (accessed on the [NRI Data Resources page](https://hazards.fema.gov/nri/data-resources#csvDownload){target="_blank"}). Unzip the file, then drop the whole `NRI_Table_Counties/` folder into a `data/` folder in your HW repository.
2. **Add your `data/` folder to `.gitignore`**: So we don't accidentally push our data to GitHub!
3. **Read in `NRIDataDictionary.csv`:** `NRI_Table_Counties/` contains a few different files, including this CSV file which describes each of the NRI variables found in `NRI_Table_Counties.csv`. This is a helpful place to start!
4. **Read in `NRI_Table_Counties.csv`:** This is your data! *We'll only be using data for the 50 US states.*
5. **Build your viz:** This may require some data wrangling first. Your final viz should: 
    - [ ] include a title & caption (which describes the data source, e.g. "Data: FEMA National Risk Index (2023 Release)")
    - [ ] consider and implement strategies for drawing the reader's eye to important information
    - [ ] have an updated theme (you'll learn more about fine-tuning ggplot themes in [week 4 discussion](../week4.qmd#discussion-materials){target="_blank"})

When you're done with your viz, answer the following questions:

- [ ] **1.** How did you decide which type of graphic form was best suited for answering the question? What alternative graphic forms could you have used instead? Why did you settle on this particular graphic form?
- [ ] **2.** What modifications did you make to this viz to make it more easily readable?
- [ ] **3.** Is there anything you wanted to implement, but didn't know how? If so, please describe.

### Part 1c. Create viz #2 + answer questions

Create a data viz that helps to answer the question: [***How does climate hazard risk exposure vary across racial / ethnic groups in California?***]{.teal-text}

Follow these steps to get started:

1. **Import ACS data using `tidycensus::get_acs()`:** You'll need your API key to use `{tidycensus}` (revisit [week 2 pre-class prep instructions](../week2.qmd#download-templates){target="_blank"}, if necessary). You may use the following code: 

```{r}
#| eval: false
#| echo: true
#| code-line-numbers: false
#.........see all available ACS variables + descriptions.........
acs_vars <- load_variables(year = 2023,
                           dataset = "acs1")

#..................import race & ethnicity data..................
race_ethnicity <- get_acs(
  geography = "county",
  survey = "acs1",
  variables = c("B01003_001", "B02001_002", "B02001_003",
                "B02001_004", "B02001_005", "B02001_006",
                "B02001_007", "B02001_008", "B03002_012",
                "B03002_002"),
  state = "CA", 
  year = 2023) |>
  left_join(acs_vars, by = join_by(variable == name)) # join variable descriptions (so we know what's what!)
```


When you're done with your viz, answer the following questions:

- [ ] **1.** How did you decide which type of graphic form was best suited for answering the question? What alternative graphic forms could you have used instead? Why did you settle on this particular graphic form?
- [ ] **2.** What modifications did you make to this viz to make it more easily readable?
- [ ] **3.** Is there anything you wanted to implement, but didn't know how? If so, please describe.

### Part 1d. Polish your `.qmd` file

- title
- fig-asp
- fig-align
- out-width
- fig-alt
- suppress warnings & messages
- code is appropriately annotated

